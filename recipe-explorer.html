<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recipe Explorer</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            min-height: 100vh;
            padding: 2rem;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 2rem;
        }
        
        .ingredient-input-section {
            background: #f8f9fa;
            padding: 2rem;
            border-radius: 15px;
            margin-bottom: 2rem;
        }
        
        .ingredient-input {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }
        
        .ingredient-input input {
            flex: 1;
            min-width: 200px;
            padding: 0.75rem;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
        }
        
        .ingredient-input button {
            padding: 0.75rem 2rem;
            background: #f5576c;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: background 0.3s;
        }
        
        .ingredient-input button:hover {
            background: #e0485c;
        }
        
        .ingredient-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
        }
        
        .ingredient-tag {
            background: #f5576c;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }
        
        .ingredient-tag button {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 1.2rem;
            line-height: 1;
            padding: 0;
            width: 20px;
            height: 20px;
        }
        
        .search-btn {
            width: 100%;
            padding: 1rem;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 1rem;
            transition: transform 0.3s;
        }
        
        .search-btn:hover {
            transform: translateY(-2px);
        }
        
        .search-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .recipes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }
        
        .recipe-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }
        
        .recipe-card:hover {
            transform: translateY(-5px);
        }
        
        .recipe-image {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
        }
        
        .recipe-content {
            padding: 1.5rem;
        }
        
        .recipe-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #333;
        }
        
        .recipe-description {
            color: #666;
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }
        
        .recipe-ingredients {
            margin-bottom: 1rem;
        }
        
        .recipe-ingredients h4 {
            font-size: 0.9rem;
            color: #333;
            margin-bottom: 0.5rem;
        }
        
        .ingredient-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        
        .ingredient-badge {
            background: #f8f9fa;
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.8rem;
            color: #666;
        }
        
        .recipe-link {
            display: inline-block;
            padding: 0.5rem 1rem;
            background: #f5576c;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-size: 0.9rem;
            transition: background 0.3s;
        }
        
        .recipe-link:hover {
            background: #e0485c;
        }
        
        .loading {
            text-align: center;
            padding: 3rem;
            color: #666;
        }
        
        .no-results {
            text-align: center;
            padding: 3rem;
            color: #666;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // ë ˆì‹œí”¼ ë°ì´í„°ë² ì´ìŠ¤ (ì‹¤ì œë¡œëŠ” Python REST APIì—ì„œ ê°€ì ¸ì˜´)
        const RECIPE_DATABASE = [
            {
                id: 1,
                name: "ê¹€ì¹˜ë³¶ìŒë°¥",
                description: "ë‚¨ì€ ê¹€ì¹˜ì™€ ë°¥ìœ¼ë¡œ ë§Œë“œëŠ” ê°„ë‹¨í•˜ê³  ë§›ìˆëŠ” ë³¶ìŒë°¥",
                ingredients: ["ê¹€ì¹˜", "ë°¥", "ê³„ë€", "ì‹ìš©ìœ "],
                image: "ğŸ³"
            },
            {
                id: 2,
                name: "ê³„ë€ë§ì´",
                description: "ë¶€ë“œëŸ½ê³  ê³ ì†Œí•œ ê³„ë€ë§ì´",
                ingredients: ["ê³„ë€", "ì‹ìš©ìœ ", "ì†Œê¸ˆ"],
                image: "ğŸ³"
            },
            {
                id: 3,
                name: "ëœì¥ì°Œê°œ",
                description: "êµ¬ìˆ˜í•œ ëœì¥ìœ¼ë¡œ ë“ì¸ ë”°ëœ»í•œ ì°Œê°œ",
                ingredients: ["ëœì¥", "ë‘ë¶€", "ì• í˜¸ë°•", "ì–‘íŒŒ", "ë¬¼"],
                image: "ğŸ²"
            },
            {
                id: 4,
                name: "ë§ˆëŠ˜ë³¶ìŒë°¥",
                description: "í–¥ê¸‹í•œ ë§ˆëŠ˜ì˜ í’ë¯¸ê°€ ì¼í’ˆì¸ ë³¶ìŒë°¥",
                ingredients: ["ë§ˆëŠ˜", "ë°¥", "ì‹ìš©ìœ ", "ì†Œê¸ˆ"],
                image: "ğŸ³"
            },
            {
                id: 5,
                name: "ë‘ë¶€ì¡°ë¦¼",
                description: "ë¶€ë“œëŸ¬ìš´ ë‘ë¶€ë¥¼ ì–‘ë…ì— ì¡°ë¦° ë°˜ì°¬",
                ingredients: ["ë‘ë¶€", "ì–‘íŒŒ", "ê³ ì¶”ì¥", "ì„¤íƒ•"],
                image: "ğŸ²"
            },
            {
                id: 6,
                name: "ê³„ë€êµ­",
                description: "ê°„ë‹¨í•˜ê³  ì‹œì›í•œ ê³„ë€êµ­",
                ingredients: ["ê³„ë€", "ë¬¼", "ì†Œê¸ˆ", "ëŒ€íŒŒ"],
                image: "ğŸ²"
            },
            {
                id: 7,
                name: "ê¹€ì¹˜ì°Œê°œ",
                description: "ì‹œì›í•˜ê³  ì¹¼ì¹¼í•œ ê¹€ì¹˜ì°Œê°œ",
                ingredients: ["ê¹€ì¹˜", "ë‘ë¶€", "ë¬¼", "ê³ ì¶§ê°€ë£¨"],
                image: "ğŸ²"
            },
            {
                id: 8,
                name: "ì•¼ì±„ë³¶ìŒ",
                description: "ì‹ ì„ í•œ ì•¼ì±„ë¥¼ ë³¶ì€ ê±´ê°•í•œ ë°˜ì°¬",
                ingredients: ["ì–‘íŒŒ", "ì• í˜¸ë°•", "ì‹ìš©ìœ ", "ì†Œê¸ˆ"],
                image: "ğŸ¥—"
            }
        ];

        const RecipeExplorer = () => {
            const [ingredients, setIngredients] = useState([]);
            const [currentIngredient, setCurrentIngredient] = useState('');
            const [recipes, setRecipes] = useState([]);
            const [loading, setLoading] = useState(false);

            // ì¬ë£Œ ì¶”ê°€
            const addIngredient = () => {
                if (currentIngredient.trim() && !ingredients.includes(currentIngredient.trim())) {
                    setIngredients([...ingredients, currentIngredient.trim()]);
                    setCurrentIngredient('');
                }
            };

            // ì¬ë£Œ ì œê±°
            const removeIngredient = (ingredient) => {
                setIngredients(ingredients.filter(ing => ing !== ingredient));
            };

            // ë ˆì‹œí”¼ ê²€ìƒ‰ (ì‹¤ì œë¡œëŠ” Python REST API í˜¸ì¶œ)
            const searchRecipes = async () => {
                if (ingredients.length === 0) {
                    alert('ì¬ë£Œë¥¼ ìµœì†Œ 1ê°œ ì´ìƒ ì¶”ê°€í•´ì£¼ì„¸ìš”!');
                    return;
                }

                setLoading(true);
                
                // ì‹œë®¬ë ˆì´ì…˜: ì‹¤ì œë¡œëŠ” fetch('/api/recipes', { method: 'POST', body: JSON.stringify({ingredients}) })
                setTimeout(() => {
                    // ë³´ìœ í•œ ì¬ë£Œë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ë ˆì‹œí”¼ í•„í„°ë§
                    const matchedRecipes = RECIPE_DATABASE.filter(recipe => {
                        // ë ˆì‹œí”¼ì˜ ì¬ë£Œ ì¤‘ í•˜ë‚˜ë¼ë„ ë³´ìœ  ì¬ë£Œì— í¬í•¨ë˜ë©´ ë§¤ì¹­
                        return recipe.ingredients.some(recipeIng => 
                            ingredients.some(userIng => 
                                recipeIng.includes(userIng) || userIng.includes(recipeIng)
                            )
                        );
                    });

                    // ë§¤ì¹­ëœ ì¬ë£Œ ìˆ˜ë¡œ ì •ë ¬
                    const sortedRecipes = matchedRecipes.sort((a, b) => {
                        const aMatches = a.ingredients.filter(ing => 
                            ingredients.some(userIng => ing.includes(userIng) || userIng.includes(ing))
                        ).length;
                        const bMatches = b.ingredients.filter(ing => 
                            ingredients.some(userIng => ing.includes(userIng) || userIng.includes(ing))
                        ).length;
                        return bMatches - aMatches;
                    });

                    setRecipes(sortedRecipes);
                    setLoading(false);
                }, 1000);
            };

            return (
                <div className="container">
                    <h1>ğŸ³ Recipe Explorer</h1>
                    <p style={{ textAlign: 'center', color: '#666', marginBottom: '2rem' }}>
                        ëƒ‰ì¥ê³  ì† ì¬ë£Œë¥¼ ì…ë ¥í•˜ë©´ ë§Œë“¤ ìˆ˜ ìˆëŠ” ë ˆì‹œí”¼ë¥¼ ì¶”ì²œí•´ë“œë¦½ë‹ˆë‹¤!
                    </p>

                    <div className="ingredient-input-section">
                        <h3 style={{ marginBottom: '1rem' }}>ë³´ìœ í•œ ì¬ë£Œë¥¼ ì…ë ¥í•˜ì„¸ìš”</h3>
                        <div className="ingredient-input">
                            <input
                                type="text"
                                placeholder="ì˜ˆ: ê³„ë€, ê¹€ì¹˜, ë°¥, ë‘ë¶€..."
                                value={currentIngredient}
                                onChange={(e) => setCurrentIngredient(e.target.value)}
                                onKeyPress={(e) => e.key === 'Enter' && addIngredient()}
                            />
                            <button onClick={addIngredient}>ì¶”ê°€</button>
                        </div>
                        
                        {ingredients.length > 0 && (
                            <div className="ingredient-tags">
                                {ingredients.map((ingredient, index) => (
                                    <div key={index} className="ingredient-tag">
                                        {ingredient}
                                        <button onClick={() => removeIngredient(ingredient)}>Ã—</button>
                                    </div>
                                ))}
                            </div>
                        )}

                        <button 
                            className="search-btn" 
                            onClick={searchRecipes}
                            disabled={ingredients.length === 0 || loading}
                        >
                            {loading ? 'ê²€ìƒ‰ ì¤‘...' : 'ë ˆì‹œí”¼ ì°¾ê¸° ğŸ”'}
                        </button>
                    </div>

                    {loading && (
                        <div className="loading">
                            <p>ë ˆì‹œí”¼ë¥¼ ì°¾ê³  ìˆìŠµë‹ˆë‹¤...</p>
                        </div>
                    )}

                    {!loading && recipes.length > 0 && (
                        <div>
                            <h2 style={{ marginBottom: '1rem' }}>
                                ì¶”ì²œ ë ˆì‹œí”¼ {recipes.length}ê°œ
                            </h2>
                            <div className="recipes-grid">
                                {recipes.map(recipe => (
                                    <div key={recipe.id} className="recipe-card">
                                        <div className="recipe-image">
                                            {recipe.image}
                                        </div>
                                        <div className="recipe-content">
                                            <div className="recipe-title">{recipe.name}</div>
                                            <div className="recipe-description">
                                                {recipe.description}
                                            </div>
                                            <div className="recipe-ingredients">
                                                <h4>í•„ìš”í•œ ì¬ë£Œ:</h4>
                                                <div className="ingredient-list">
                                                    {recipe.ingredients.map((ing, idx) => (
                                                        <span 
                                                            key={idx} 
                                                            className="ingredient-badge"
                                                            style={{
                                                                background: ingredients.some(userIng => 
                                                                    ing.includes(userIng) || userIng.includes(ing)
                                                                ) ? '#d4edda' : '#f8f9fa'
                                                            }}
                                                        >
                                                            {ing}
                                                        </span>
                                                    ))}
                                                </div>
                                            </div>
                                            <a href="#" className="recipe-link">
                                                ë ˆì‹œí”¼ ë³´ê¸° â†’
                                            </a>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    )}

                    {!loading && recipes.length === 0 && ingredients.length > 0 && (
                        <div className="no-results">
                            <p>ğŸ˜” í•´ë‹¹ ì¬ë£Œë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ë ˆì‹œí”¼ë¥¼ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.</p>
                            <p style={{ marginTop: '0.5rem' }}>ë‹¤ë¥¸ ì¬ë£Œë¥¼ ì¶”ê°€í•´ë³´ì„¸ìš”!</p>
                        </div>
                    )}
                </div>
            );
        };

        ReactDOM.render(<RecipeExplorer />, document.getElementById('root'));
    </script>
</body>
</html>

